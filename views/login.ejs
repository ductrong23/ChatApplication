<form onsubmit="return false;">
  <caption>
    <h1>Login</h1>
  </caption>
  <input
    type="text"
    name="username"
    id="ip_username"
    placeholder="Username..."
  />
  <br />
  <input
    type="password"
    name="password"
    id="ip_password"
    placeholder="Password..."
  />
  <button id="btn_login">Login</button>
</form>

<script>
  const btn_login = document.getElementById("btn_login");
  const ip_username = document.getElementById("ip_username");
  const ip_password = document.getElementById("ip_password");

  btn_login.addEventListener("click", () => {
    const username = ip_username.value;
    const password = ip_password.value;

    const obj = {
      username,
      password,
    };

alert(obj.username)

    fetch("/api/accounts/login", {
      headers: {
        'Accept': "application/json",
        "Content-Type": "application/json",
      },
      method: "POST",
      body: JSON.stringify(obj),
    })
      .then(res=> res.json())
      .then(result => {
        if(result.statusCode){
            alert(result.message)
        }else{
            window.location = "/chat"
        }
      })
      .catch(error => {
        alert("Error: " + error.message)
        console.log(error)
      });
  });
</script>
